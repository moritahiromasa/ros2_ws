%
%   千葉工業大学 未来ロボティクス学科 卒業研究概要 スタイルファイル
%                                 (ROBOMECH のスタイルファイルを改変)
%               Ver. 1.0          by H. FUJII (CIT Adrobo FUJIILAB.)
%
% このスタイルファイルは機械学会講演用スタイルファイルの様式を基に調整している
%
% See also.
%   http://www.robotics.is.tohoku.ac.jp/robomec98/faq.html#q1

\typeout{Document Style Option 'For robomec style file.' by E.Uchibe <31 Jan 95>}
\typeout{modified by ROBOMECH2014 executive committee <7 Feb 14>}
\typeout{modified by Hiromitsu FUJII for adrobo bthesis <29 Nov 2019>}
\def\@twoc{}
\twocolumn
\sloppy
\flushbottom

%====================================================================
% レイアウト設定
%====================================================================
\textheight     247.2mm %         % 297mm - 24.9mm(head) - 24.9mm(bottom)
\textwidth      163.8mm %         % 210mm - 23.1mm(left) - 23.1mm(right)

\topmargin      -0.5mm            % 24.9 - 25.4mm(head) 
\headheight     0mm
\topskip		0mm
\headsep        0mm

\oddsidemargin  -2.3mm            % 23.1 - 25.4mm(left)
\evensidemargin -2.3mm
\columnsep      6mm
\parindent      1zw

% 行間の設定
%\setlength{\baselineskip}{4.2mm}
\renewcommand{\baselinestretch}{1.0}
%\renewcommand{\baselinestretch}{0.93}
%\kanjiskip=0.023zw plus 0.015zw minus 0.015zw

% for list environment
\leftmargini   2em
\leftmarginv   .5em
\leftmarginvi  .5em

% for footnote
\marginparwidth 48pt
\marginparsep   10pt

\abovecaptionskip	0pt
\belowcaptionskip	-3pt

%====================================================================
% figure, table caption を2行以上処理するために
% caption の出力形式も変える．
%
% \@makecaption{NUMBER}{TEXT} : Macro to make a figure or table caption.  
%      NUMBER : Figure or table number--e.g., 'Figure 3.2' 
%      TEXT   : The caption text.
%  Macro should be called inside a \parbox of right width, with \normalsize.
% changed 25 Jun 86 to fix according to Howard Trickey:
% instead of \unhbox\@tempboxa\par we do #1: #2\par
%====================================================================
\long\def\@makecaption#1#2{
   \vskip 10pt 
   \setbox\@tempboxa\hbox{#1 #2}
   \ifdim \wd\@tempboxa >\hsize   % IF longer than one line:
       \@hangfrom{#1 }#2\par %\ignorespaces #2\strut \par %chaged on 89-09-07
       %#1 #2\par                 %   THEN set as ordinary paragraph.
     \else                        %   ELSE  center.
       \hbox to\hsize{\hfil\box\@tempboxa\hfil}  
   \fi}

%====================================================================
% section, subsection
%====================================================================
\renewcommand{\thesection}{\arabic{section}.\hspace{1zw}}
\renewcommand{\thesubsection}{\arabic{section}・\arabic{subsection}\hspace{1zw}}

\def\section{\@startsection {section}{1}{\z@}%
	{0.8zh plus 0.2zh minus 0.2zh}%
	{0.4zh plus 0.1zh minus 0.1zh}
	{\centering\normalsize\bf}}
\def\subsection{\@startsection{subsection}{2}{\z@}%
	{0.8zh plus 0.15zh minus 0.15zh}%
	{-2zw}%
	{\reset@font\normalsize\bfseries}}
	%{0.1zh plus 0.1zh minus 0zh}%
	%{\small\bf}}
\def\subsubsection{\@startsection{subsubsection}{3}{\z@}%
	{0.2zh plus 0.1zh minus 0.1zh}%
    {-2zw}%
    {\reset@font\normalsize\bfseries}}
	%{0.1zh plus 0.1zh minus 0.1zh}%
	%{\small\bf}}
\def\paragraph{\@startsection{paragraph}{4}{\z@}{0zh}{0zh}{\small\bf}}
\def\subparagraph{\@startsection{subparagraph}{4}{\parindent}{0zh}{0zh}{\small\bf}}

%\renewcommand{\subsection}{\@startsection{subsection}{2}{\z@}%
%  {1.5\Cvs \@plus.5\Cvs \@minus.2\Cvs}%
%  {-2zw}%
%  {\reset@font\normalsize\bfseries}}
%\renewcommand{\subsubsection}{\@startsection{subsubsection}{3}{\z@}%
%  {1.5\Cvs \@plus.5\Cvs \@minus.2\Cvs}%
%  {-2zw}%
%  {\reset@font\normalsize\bfseries}}
\def\@seccntformat#1{\csname the#1\endcsname}

%====================================================================
% 図表
%====================================================================
\renewcommand{\thefigure}{\arabic{figure}}
\renewcommand{\thetable}{\arabic{table}}

\def\fnum@figure{{\bf Fig.~\thefigure}}
\def\fnum@table{{\bf Table \thetable}}

\def\reffig#1{{図}\ref{fig:#1}}
\def\reftab#1{{表}\ref{tab:#1}}
\def\refeqn#1{{式}(\ref{eq:#1})}

%====================================================================
% 数式
%====================================================================
\newcommand{\inlineTag}{%
  \refstepcounter{equation}%
  \bgroup\normalfont\normalcolor (\theequation)\egroup}

%\setlength{\abovedisplayskip}{5truemm}
%\setlength{\belowdisplayskip}{5truemm}
%\setlength{\abovedisplayshortskip}{5truemm}
%\setlength{\belowdisplayshortskip}{5truemm}

%====================================================================
% 参考文献
%====================================================================
\renewcommand{\refname}{\fontsize{10pt}{10pt}\selectfont \gt 文\hspace{3zw}献 \par \vskip .5zh}

%====================================================================
% 脚注
%====================================================================
\renewcommand\thefootnote{}
\renewcommand{\footnoterule}{%
 \vspace{0.5pt}                         % 線から上の幅
 \noindent\rule{0.5\textwidth}{0.2pt}   % 線の長さ，太さ
 \vspace{-2.5ex}                        % 線から下の幅
}

%====================================================================
% フォントの定義
%====================================================================
\def\doctypefont#1{\gdef\@doctypefont{#1}}
\def\titlefont#1#2{\gdef\@titlefont{#1}\gdef\@etitlefont{#2}}
\def\authorfont#1#2{\gdef\@authorfont{#1}\gdef\eauthorfont{#2}}
\def\affiliationfont#1#2{\gdef\@affiliationfont{#1}\gdef\@eaffiliationfont{#2}}
\def\abstractfont#1{\gdef\@abstractfont{#1}}

\gdef\@doctypefont{\fontsize{10pt}{10pt}\selectfont \gt}
\gdef\@titlefont{\fontsize{14pt}{18pt}\selectfont \gt}
\gdef\@subtitlefont{\large \bf}
\gdef\@etitlefont{\fontsize{14pt}{18pt}\selectfont \bf}
\gdef\@esubtitlefont{\large \bf}
\gdef\@authorfont{\fontsize{12pt}{0pt}\selectfont}
\gdef\@affiliationfont{\normalsize}
\gdef\@eauthorfont{\fontsize{12pt}{0pt}\selectfont}
\gdef\@eaffiliationfont{\small}
\gdef\@abstractfont{\fontsize{10pt}{10pt}\selectfont}

%====================================================================
% 各種情報出力用のマクロ
%====================================================================
\def\doctype#1{\gdef\@doctype{#1}}
\def\title#1#2{\gdef\@title{#1} \gdef\@subtitle{#2}}
\def\etitle#1#2{\gdef\@etitle{#1} \gdef\@esubtitle{#2}}
\def\eauthor#1{\gdef\@eauthor{#1}}
\def\abst#1{\gdef\@abst{#1}}
%\def\supervisor#1{\footnote[0]{\hspace{-2zw}{#1}}}
\def\ThDatePlace#1#2#3{\gdef\@Th{#1} \gdef\@Date{#2} \gdef\@Place{#3}}


% 個々の実装はイマイチだけど暫定的に
\floatstyle{plaintop}
\newfloat{myfootnote}{htp}{lot}[section]

\def\supervisor#1{%
\begingroup
\begin{myfootnote}[b]
\renewcommand{\arraystretch}{1.3}
\begin{tabular*}{0.5\textwidth}{l}
\hline
\hspace{-.5zw}#1
\end{tabular*}
\end{myfootnote}
\endgroup
}

%====================================================================
% 所属表示用のマクロ
%====================================================================
\def\affiliation#1#2{%
\@ifnextchar[{\@@organization{#1}{#2}}{\@@organization{#1}{#2}[0]}}

\let\@organization=\empty
\let\@eorganization=\empty

\def\@@organization#1#2[#3]{%
\leftappend#1::#3\to\@organization
\leftappend#2::#3\to\@eorganization
}

\def\printorganization{%
\ifx\@organization\empty
  \let\next=\relax
\else
  \let\next=\printorganization
  \lop\@organization\to\a
  \expandafter\printo\a
\fi
\next}
\def\printeorganization{%
\ifx\@eorganization\empty
  \let\next=\relax
\else
  \let\next=\printeorganization
  \lop\@eorganization\to\a
  \expandafter\eprinto\a
\fi
\next}

\def\printo#1::#2{%
  \orgmark{#2}%
  \hbox{#1}
  \hskip\columnsep
}
\def\eprinto#1::#2{%
  \orgmark{#2}%
  \hbox{#1}
  \hskip\columnsep
}

%====================================================================
% 未使用のマクロ
%====================================================================
%\newtoks\tmptoki
%\newtoks\tmptokii
%
%\def\leftappend#1::#2\to#3{%
%  \tmptoki={\\{#1::#2}}
%  \ifx#3\empty
%    \edef#3{\the\tmptoki}
%  \else
%    \tmptokii=\expandafter{#3}
%    \edef#3{\the\tmptokii\the\tmptoki}
%  \fi
%}
%
%\def\lop#1\to#2{\expandafter\lopoff#1\lopoff#1#2}
%\long\def\lopoff\\#1#2\lopoff#3#4{\def#4{#1}\def#3{#2}}
%
%\def\print#1::#2{
%  \hbox{#1}
%  \c@header=#2
%  \headermark%
%  \hskip\columnsep
%}

%====================================================================
% 特殊文字
%====================================================================
\newcount\c@header
\def\headermark{%
$^{%
\ifcase\c@header
\or \dagger
\or \dagger\dagger
\or \dagger\dagger\dagger
\or \dagger\dagger\dagger\dagger
\else \dagger\dagger\dagger\dagger\dagger%
\fi%
}$
}

\def\orgmark#1{%
$^{%
\ifcase #1
\or \dagger
\or \dagger\dagger
\or \dagger\dagger\dagger
\or \dagger\dagger\dagger\dagger
\else \dagger\dagger\dagger\dagger\dagger%
\fi%
}$
}

%====================================================================
% 論文情報の表示部分
%====================================================================

\def\maketitle{\par
 \begingroup
 \def\thefootnote{\fnsymbol{footnote}}
 \def\@makefnmark{\hbox 
 to 0pt{$^{\@thefnmark}$\hss}} 
 \if@twocolumn 
 \twocolumn[\@maketitle] 
 \else \newpage
 \global\@topnum\z@ \@maketitle \fi\@thanks
 \endgroup
 \setcounter{footnote}{0}
 \let\maketitle\relax\let\@maketitle\relax
 \gdef\@etitle{}\let\thanks\relax}

\def\@maketitle{\newpage
 \null

%------------------------------------------------------
% タイトル
%------------------------------------------------------
 {\@doctypefont \@doctype \par}       % 左上のヘッダ部分
 \vskip 1zh
 \begin{center}
 {\@titlefont \@title \par}           % 日本語のタイトル
 {\@subtitlefont \@subtitle \par}     % 日本語のサブタイトル
 \vskip 1.0zh
 \begin{flushright}
 {\@authorfont \@author \par}
 \end{flushright}
 \vskip 1.0zh
 {\@etitlefont \@etitle \par}         % 英語のタイトル
 {\@esubtitlefont \@esubtitle \par}   % 英語のサブタイトル
 \vskip 1.0zh
 {\@eauthorfont \@eauthor \par}
 \vskip 1.5zh

%------------------------------------------------------
% 所属
%------------------------------------------------------
\ifx\@organization\empty%
\else%
 \vskip 0.5em
  \vbox{%
    \@affiliationfont%
    \hsize=\textwidth%
    \leftskip=0pt plus 1fill%
    \rightskip=0pt plus 1fill%
    \leavevmode\printorganization%
  }%
\fi%
\ifx\@organization\empty%
\else%
 \vskip 0.2em
  \vbox{%
    \@eaffiliationfont%
    \hsize=\textwidth%
    \leftskip=0pt plus 1fill%
    \rightskip=0pt plus 1fill%
    \leavevmode\printeorganization%
  }%
\fi%
 \end{center}
 \par
 }
%------------------------------------------------------
% 英文概要・キーワード
%------------------------------------------------------
\def\abstract#1{\long\def\@abstract{#1}}
\def\@abstract{}
\def\keywords#1{\long\def\@keywords{#1}}
\def\@keywords{}

\let\@oldmaketitle=\@maketitle
\def\@maketitle{
  \@oldmaketitle
  \begin{center}
    \begin{minipage}{147mm} % 297mm -25mm(left) -25mm(right)
	{\@abstractfont \qquad\@abstract}
    \vskip 0.5zh
    {\itshape\textbf{Key Words}\bf: }{\small \@keywords}
    \end{minipage}
  \end{center}
  \vskip 1.5zh
}
% end of file
